[{"name":"server.R","content":"#\r\n# This is the server logic of a Shiny web application. You can run the\r\n# application by clicking 'Run App' above.\r\n#\r\n# Find out more about building applications with Shiny here:\r\n#\r\n#    http://shiny.rstudio.com/\r\n#\r\n\r\nlibrary(shiny)\r\n\r\nlibrary(readr)\r\nlibrary(dplyr)\r\n\r\nlibrary(sf)\r\nlibrary(leaflet)\r\n\r\nlibrary(ggplot2)\r\nlibrary(plotly)\r\n\r\n\r\nsf_data <- read_rds(\"../clean_data/registrations_sf_summary.rds\")\r\n\r\nlong_data <- read_rds(\"../clean_data/registrations_long.rds\")\r\n\r\n\r\n# Define server logic required to draw a histogram\r\nfunction(input, output, session) {\r\n    \r\n  output$var_map <- renderLeaflet({\r\n    \r\n    var <- input$variable_input\r\n    \r\n    value_vector <- sf_data[[var]]\r\n    vir_pal <- colorNumeric(\"viridis\", domain = range(value_vector, na.rm = T), )\r\n    \r\n    leaflet() |>\r\n      addTiles() |>\r\n      addPolygons(\r\n        data = sf_data, fillColor = vir_pal(value_vector),\r\n        fillOpacity = 0.6,\r\n        color = \"black\", weight = 0.5\r\n      )\r\n    \r\n  })\r\n  \r\n  \r\n  output$var_trend <- renderPlotly({\r\n    \r\n    plot <- long_data |>\r\n      filter(name == input$variable_input) |>\r\n      ggplot(aes(x = year_month, y = value, group = county)) +\r\n      geom_line() +\r\n      theme_minimal()\r\n    \r\n    ggplotly(plot)\r\n  })\r\n\r\n}\r\n","type":"text"},{"name":"ui.R","content":"#\r\n# This is the user-interface definition of a Shiny web application. You can\r\n# run the application by clicking 'Run App' above.\r\n#\r\n# Find out more about building applications with Shiny here:\r\n#\r\n#    http://shiny.rstudio.com/\r\n#\r\n\r\nlibrary(shiny)\r\nlibrary(bslib)\r\n\r\nlibrary(leaflet)\r\nlibrary(ggplot2)\r\nlibrary(plotly)\r\nlibrary(reactable)\r\n\r\npage_fluid(\r\n  title = \"Iowa Voter Registration Data\",\r\n  \r\n  layout_columns(\r\n    col_widths = c(6, 6),\r\n    selectInput(\r\n      inputId = \"variable_input\", label = \"Select a Variable\", \r\n      choices = c(\"active_pct\", \"reg_pct\")\r\n    ),\r\n    selectInput(\r\n      inputId = \"year_input\", label = \"Select a Year\",\r\n      choices = c(2015, 2025)\r\n    )\r\n  ),\r\n  #leafletOutput(\"var_map\"),\r\n  plotlyOutput(\"var_trend\")\r\n  \r\n)","type":"text"}]
